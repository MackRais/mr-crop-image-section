function mr_section_init(i){function t(t,n){if(t.files&&t.files[0]){var l=new FileReader,a=$("<img />"),e=$("<span>âœ–</span>"),s=t.files[0].type.toString(),o=s.split("/");if("image"!==o[0])return $(t).val(""),!1;l.onload=function(t){e.addClass("mr-preview-remove-img-section"),a.addClass("mr-preview-img-section").attr("src",t.target.result),n.empty(),n.append(a),a.init_crop({nav_block:n.siblings(".mr-control-panel"),width:i.width,height:i.height,data_block:n.siblings(".mr-data-inputs")}),n.siblings(".mr-data-inputs").find(".mr-origin-height").val(a.height()),n.siblings(".mr-data-inputs").find(".mr-origin-width").val(a.width())},l.readAsDataURL(t.files[0])}}i.x=i.x?i.x:0,i.y=i.y?i.y:0,i.width=i.width?i.width:400,i.height=i.height?i.height:300,i.scale=i.scale?i.scale:1,i.angle=i.angle?i.angle:0;var n=15*(i.width/i.height)+"px",l=40*(i.width/i.height)+"px";$(i.section).find("h2").css("font-size",n),$(i.section).find(".fa-photo").css("font-size",l),$(".mr-upload-btn-section").click(function(i){i.preventDefault(),$(this).parent().siblings("input:file").click()}),$(i.section).click(function(){0==$(this).find("img").length&&$(this).siblings("input:file").click()}),$(i.id_input_file).change(function(){$(this).siblings(".mr-data-inputs").find(".mr-x").val(i.x),$(this).siblings(".mr-data-inputs").find(".mr-y").val(i.y),$(this).siblings(".mr-data-inputs").find(".mr-w").val(i.width),$(this).siblings(".mr-data-inputs").find(".mr-h").val(i.height),$(this).siblings(".mr-data-inputs").find(".mr-scale").val(i.scale),$(this).siblings(".mr-data-inputs").find(".mr-angle").val(i.angle);var n=$(this).siblings('[data-role="upload_image"]');t(this,n)}),$.fn.init_crop=function(i){var t=$(this);$(this).one("load",function(){$(this).guillotine({width:i.width,height:i.height,eventOnChange:"guillotinechange"});var n=$(this).guillotine("getData");for(var l in n)$("#"+l).html(n[l]);i.nav_block.find(".mr-rotate-left").click(function(){t.guillotine("rotateLeft")}),i.nav_block.find(".mr-rotate-right").click(function(){t.guillotine("rotateRight")}),i.nav_block.find(".mr-fit").click(function(){t.guillotine("fit")}),i.nav_block.find(".mr-zoom-in").click(function(){t.guillotine("zoomIn")}),i.nav_block.find(".mr-zoom-out").click(function(){t.guillotine("zoomOut")}),$(this).on("guillotinechange",function(t,n,l){n.scale=parseFloat(n.scale.toFixed(4)),i.data_block.find(".mr-origin-height").val($(this).height()),i.data_block.find(".mr-origin-width").val($(this).width());for(var a in n)i.data_block.find(".mr-"+a).val(n[a])});var n=$(this).guillotine("getData");$(this).trigger("guillotinechange",n),$(this).guillotine("fit")}),$(this).prop("complete")&&$(this).trigger("load")}}